"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5090],{35318:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(27378);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=u(n),m=i,h=c["".concat(s,".").concat(m)]||c[m]||d[m]||o;return n?a.createElement(h,r(r({ref:t},p),{},{components:n})):a.createElement(h,r({ref:t},p))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,r[1]=l;for(var u=2;u<o;u++)r[u]=n[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},70800:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return c},contentTitle:function(){return m},metadata:function(){return h},toc:function(){return g},default:function(){return y}});var a=n(35318),i=Object.defineProperty,o=Object.defineProperties,r=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&p(e,n,t[n]);if(l)for(var n of l(t))u.call(t,n)&&p(e,n,t[n]);return e};const c={id:"deploy-auto",title:"To Deploy Automatically",description:"Docusaurus was designed from the ground up to be easily installed and used to get your website up and running quickly."},m=void 0,h={unversionedId:"deploy-auto",id:"deploy-auto",title:"To Deploy Automatically",description:"Docusaurus was designed from the ground up to be easily installed and used to get your website up and running quickly.",source:"@site/docs/deploy-auto.md",sourceDirName:".",slug:"/deploy-auto",permalink:"/zh-CN/docs/next/deploy-auto",editUrl:"https://crowdin.com/project/docusaurus-v2/zh-CN",tags:[],version:"current",lastUpdatedBy:"thebestornothing",lastUpdatedAt:1645749642,formattedLastUpdatedAt:"2022/2/25",frontMatter:{id:"deploy-auto",title:"To Deploy Automatically",description:"Docusaurus was designed from the ground up to be easily installed and used to get your website up and running quickly."},sidebar:"docs",previous:{title:"Create Github Websites",permalink:"/zh-CN/docs/next/github-page"},next:{title:"Configure Docusaurus",permalink:"/zh-CN/docs/next/config-website"}},g=[{value:"<code>docusaurus.config.js</code> settings",id:"docusaurusconfigjs-settings",children:[],level:2},{value:"Triggering deployment with GitHub Actions",id:"triggering-deployment-with-github-actions",children:[],level:2},{value:"Build and Deploy Automatically",id:"build-and-deploy-automatically",children:[],level:2}],b={toc:g};function y(e){var t,n=e,{components:i}=n,p=((e,t)=>{var n={};for(var a in e)s.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&l)for(var a of l(e))t.indexOf(a)<0&&u.call(e,a)&&(n[a]=e[a]);return n})(n,["components"]);return(0,a.kt)("wrapper",(t=d(d({},b),p),o(t,r({components:i,mdxType:"MDXLayout"}))),(0,a.kt)("p",null,"\ud83c\udfaf How to build and deploy the website automatcially?"),(0,a.kt)("p",null,"\ud83d\udca5 There is no need to setup a heavy deployment envirment in your computer as normal software engineers, which contain right version of nodejs, npx, and other tools."),(0,a.kt)("p",null,"\ud83d\udcb8 To make life easy, the ",(0,a.kt)("strong",{parentName:"p"},"workflow")," should be choosen to make build and deploy automatically."),(0,a.kt)("h2",d({},{id:"docusaurusconfigjs-settings"}),(0,a.kt)("inlineCode",{parentName:"h2"},"docusaurus.config.js")," settings"),(0,a.kt)("p",null,"First, modify your ",(0,a.kt)("inlineCode",{parentName:"p"},"docusaurus.config.js")," and add the following params:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",d({parentName:"tr"},{align:null}),"Name"),(0,a.kt)("th",d({parentName:"tr"},{align:null}),"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",d({parentName:"tr"},{align:null}),(0,a.kt)("inlineCode",{parentName:"td"},"organizationName")),(0,a.kt)("td",d({parentName:"tr"},{align:null}),"The GitHub user or organization that owns the deployment repository.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",d({parentName:"tr"},{align:null}),(0,a.kt)("inlineCode",{parentName:"td"},"projectName")),(0,a.kt)("td",d({parentName:"tr"},{align:null}),"The name of the deployment repository.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",d({parentName:"tr"},{align:null}),(0,a.kt)("inlineCode",{parentName:"td"},"deploymentBranch")),(0,a.kt)("td",d({parentName:"tr"},{align:null}),"The name of deployment branch. Defaults to ",(0,a.kt)("inlineCode",{parentName:"td"},"'gh-pages'")," for non-organization GitHub Pages repos (",(0,a.kt)("inlineCode",{parentName:"td"},"projectName")," not ending in ",(0,a.kt)("inlineCode",{parentName:"td"},".github.io"),"). Otherwise, this needs to be explicit as a config field or environment variable.")))),(0,a.kt)("p",null,"These fields also have their environment variable counterparts, which have a higher priority: ",(0,a.kt)("inlineCode",{parentName:"p"},"ORGANIZATION_NAME"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"PROJECT_NAME"),", and ",(0,a.kt)("inlineCode",{parentName:"p"},"DEPLOYMENT_BRANCH"),"."),(0,a.kt)("div",d({},{className:"admonition admonition-caution alert alert--warning"}),(0,a.kt)("div",d({parentName:"div"},{className:"admonition-heading"}),(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",d({parentName:"h5"},{className:"admonition-icon"}),(0,a.kt)("svg",d({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),(0,a.kt)("path",d({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),(0,a.kt)("div",d({parentName:"div"},{className:"admonition-content"}),(0,a.kt)("p",{parentName:"div"},"GitHub Pages adds a trailing slash to Docusaurus URLs by default. It is recommended to set a ",(0,a.kt)("inlineCode",{parentName:"p"},"trailingSlash")," config (",(0,a.kt)("inlineCode",{parentName:"p"},"true")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"false"),", not ",(0,a.kt)("inlineCode",{parentName:"p"},"undefined"),")."))),(0,a.kt)("p",null,"Example:"),(0,a.kt)("pre",null,(0,a.kt)("code",d({parentName:"pre"},{className:"language-js",metastring:'title="docusaurus.config.js"',title:'"docusaurus.config.js"'}),"const config = {\n  title: 'Gitcoins',\n  tagline: 'Digital Currencies',\n  organizationName: 'TheBestOrNothing',\n  projectName: 'thebestornothing.github.io',\n  baseUrl,\n  baseUrlIssueBanner: true,\n  url: 'https://thebestornothing.github.io',\n}\n")),(0,a.kt)("h2",d({},{id:"triggering-deployment-with-github-actions"}),"Triggering deployment with GitHub Actions"),(0,a.kt)("p",null,(0,a.kt)("a",d({parentName:"p"},{href:"https://help.github.com/en/actions"}),"GitHub Actions")," allow you to automate, customize, and execute your software development workflows right in your repository."),(0,a.kt)("p",null,"The workflow examples below assume your website source resides in the ",(0,a.kt)("inlineCode",{parentName:"p"},"main")," branch of your repository (the ",(0,a.kt)("em",{parentName:"p"},"source branch")," is ",(0,a.kt)("inlineCode",{parentName:"p"},"main"),"), under a folder called ",(0,a.kt)("inlineCode",{parentName:"p"},"website/"),", and your ",(0,a.kt)("a",d({parentName:"p"},{href:"https://help.github.com/en/github/working-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site"}),"publishing source")," is configured for the ",(0,a.kt)("inlineCode",{parentName:"p"},"gh-pages")," branch (the ",(0,a.kt)("em",{parentName:"p"},"deployment branch")," is ",(0,a.kt)("inlineCode",{parentName:"p"},"gh-pages"),")."),(0,a.kt)("p",null,"Our goal is that:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"When a new pull request is made to ",(0,a.kt)("inlineCode",{parentName:"li"},"main")," and updates ",(0,a.kt)("inlineCode",{parentName:"li"},"website/"),", there's an action that ensures the site builds successfully, without actually deploying. This job will be called ",(0,a.kt)("inlineCode",{parentName:"li"},"test-deploy"),"."),(0,a.kt)("li",{parentName:"ol"},"When a pull request is merged to the ",(0,a.kt)("inlineCode",{parentName:"li"},"main")," branch or someone pushes to the ",(0,a.kt)("inlineCode",{parentName:"li"},"main")," branch directly and ",(0,a.kt)("inlineCode",{parentName:"li"},"website/")," is updated, it will be built and deployed to the ",(0,a.kt)("inlineCode",{parentName:"li"},"gh-pages")," branch. After that, the new build output will be served on the GitHub Pages site. This job will be called ",(0,a.kt)("inlineCode",{parentName:"li"},"deploy"),".")),(0,a.kt)("p",null,"While you can have both jobs defined in the same workflow file, the original ",(0,a.kt)("inlineCode",{parentName:"p"},"deploy")," workflow will always be listed as skipped in the PR check suite status, which is not communicative of the actual status and provides no value to the review process. We therefore propose to manage them as separate workflows instead."),(0,a.kt)("p",null,"We will use a popular third-party deployment action: ",(0,a.kt)("a",d({parentName:"p"},{href:"https://github.com/peaceiris/actions-gh-pages#%EF%B8%8F-docusaurus"}),"peaceiris/actions-gh-pages"),"."),(0,a.kt)("p",null,"Add this workflow file in .github/workflows/ derictory:"),(0,a.kt)("pre",null,(0,a.kt)("code",d({parentName:"pre"},{className:"language-yml",metastring:'title=".github/workflows/deploy.yml"',title:'".github/workflows/deploy.yml"'}),"name: Deploy to GitHub Pages\n\non:\n  push:\n    branches: [main]\n    paths: [website/**]\n  pull_request:\n    branches: [main]\n    paths: [website/**]\n\njobs:\n  deploy:\n    name: Deploy to GitHub Pages\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v2\n      - uses: actions/setup-node@v2\n        with:\n          node-version: 16\n          cache: yarn\n      - name: Installation\n        run: yarn install\n      - name: Build website\n        working-directory: website\n        run: |\n          yarn workspace website build\n      # Popular action to deploy to GitHub Pages:\n      # Docs: https://github.com/peaceiris/actions-gh-pages#%EF%B8%8F-docusaurus\n      - name: Deploy to gh-pages branch\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          # Build output to publish to the `gh-pages` branch:\n          publish_dir: ./website/build\n          # Assign commit authorship to the official GH-Actions bot for deploys to `gh-pages` branch:\n          # https://github.com/actions/checkout/issues/13#issuecomment-724415212\n          # The GH actions bot is used by default if you didn't specify the two fields.\n          # You can swap them out with your own user credentials.\n          user_name: github-actions[bot]\n          user_email: 41898282+github-actions[bot]@users.noreply.github.com\n")),(0,a.kt)("h2",d({},{id:"build-and-deploy-automatically"}),"Build and Deploy Automatically"),(0,a.kt)("p",null,"When a pull request is merged to the ",(0,a.kt)("inlineCode",{parentName:"p"},"main")," branch or someone pushes to the ",(0,a.kt)("inlineCode",{parentName:"p"},"main")," branch directly and ",(0,a.kt)("inlineCode",{parentName:"p"},"website/")," is updated, it will be built and deployed to the ",(0,a.kt)("inlineCode",{parentName:"p"},"gh-pages")," branch. After that, the new build output will be served on the GitHub Pages site. This job will be called ",(0,a.kt)("inlineCode",{parentName:"p"},"build and deploy automatically"),"."),(0,a.kt)("center",null,(0,a.kt)("img",{src:"/img/GettingStartedCongratulations.png",width:"150"})))}y.isMDXComponent=!0}}]);